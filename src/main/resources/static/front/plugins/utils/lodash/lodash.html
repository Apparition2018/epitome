<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <base target="_blank">
    <title>lodash</title>
    <link rel="stylesheet" href="../../../../public/css/demo.css">
</head>
<body>
<section class="code-wrap h150">
    <div class="css-live-wrap">
        <div class="caption">
            <a href="https://www.npmjs.com/package/lodash-es">lodash</a> |
            <a href="https://www.npmjs.com/package/underscore">underscore</a>
        </div>
        <div class="caption">
            <a href="https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore">不再需要 lodash/underscore</a><br/>
            <a href="https://youmightnotneed.com/lodash/">不再需要 lodash</a>
        </div>
        <div class="caption"><a href="https://github.com/lodash/lodash/wiki/FP-Guide">FP Guide</a></div>
        <div class="centered">
        </div>
    </div>
</section>

<section class="code-wrap h600">
    <div class="css-live-wrap w100p">
        <div class="caption"></div>
        <div class="centered">
            <table class="w1280">
                <tr>
                    <th></th>
                    <th>API</th>
                    <th>Lodash</th>
                    <th>Native</th>
                    <th>Result</th>
                </tr>
                <tr>
                    <td rowspan="6">Array</td>
                    <td>chunk</td>
                    <td>_.chunk([1, 2, 3, 4, 5], 2)</td>
                    <td></td>
                    <td>[[1, 2], [3, 4], 5]</td>
                </tr>
                <tr>
                    <td>difference</td>
                    <td>_.difference([2, 1], [3, 2])</td>
                    <td></td>
                    <td>[1]</td>
                </tr>
                <tr>
                    <td>intersection</td>
                    <td>_.intersection([2, 1], [4, 2], [1, 2])</td>
                    <td></td>
                    <td>[2]</td>
                </tr>
                <tr>
                    <td>sortedUniq</td>
                    <td>_.sortedUniq([1, 1, 2, 3, 3, 4])</td>
                    <td>[...new Set([1, 1, 2, 3, 3, 4])]</td>
                    <td>[1, 2, 3, 4]</td>
                </tr>
                <tr>
                    <td>union</td>
                    <td>_.union([2, 3, 0], [1, 2, 3], [4])</td>
                    <td></td>
                    <td>[2, 3, 0, 1, 4]</td>
                </tr>
                <tr>
                    <td>flattenDeep</td>
                    <td>_.flattenDeep([1, [2, [3, [4]], 5]])</td>
                    <td>[1, [2, [3, [4]], 5]].flat(Infinity)</td>
                    <td>[1, 2, 3, 4, 5]</td>
                </tr>
                <tr>
                    <td rowspan="3">Collection</td>
                    <td><a href="https://www.lodashjs.com/docs/lodash.keyBy">keyBy</a></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><a href="https://www.lodashjs.com/docs/lodash.orderBy">orderBy</a></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td><a href="https://www.lodashjs.com/docs/lodash.sortBy">sortBy</a></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>String</td>
                    <td>deburr</td>
                    <td>_.deburr('déjà vu')</td>
                    <td></td>
                    <td>deja vu</td>
                </tr>
                <tr>
                    <td rowspan="3">Object</td>
                    <td>get</td>
                    <td>_.get({a: [{b: {c: 3}}]}, 'a[0].b.c', 1)</td>
                    <td>{a: [{b: {c: 3}}]}?.a?.[0]?.b?.c ?? 1</td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>set</td>
                    <td>_.set(obj, 'a[0].b.c', 4)</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>assign</td>
                    <td>_.assign({'a': 1, 'b': 2})</td>
                    <td>Object.assign({'a': 1, 'b': 2})</td>
                    <td>{a: 1, b: 2}</td>
                </tr>
                <tr>
                    <td rowspan="3">Lang</td>
                    <td>cloneDeep</td>
                    <td>_.cloneDeep(obj)</td>
                    <td>structuredClone(obj)</td>
                    <td></td>
                </tr>
                <tr>
                    <td>isEmpty</td>
                    <td>_.isEmpty([])</td>
                    <td>Object.keys([]).length === 0</td>
                    <td>true</td>
                </tr>
                <tr>
                    <td>isEqual</td>
                    <td>_.isEqual({a: 1, b: 2, c: 3}, {c: 3, b: 2, a: 1})</td>
                    <td></td>
                    <td>true</td>
                </tr>
                <tr>
                    <td>Util</td>
                    <td>times</td>
                    <td>_.times(5)</td>
                    <td>[...Array(5).keys()]</td>
                    <td>[0, 1, 2, 3, 4]</td>
                </tr>
            </table>
        </div>
    </div>
    <script type="module" class="code w0" contenteditable="true">
        // memoize
        // partition
        import _ from 'https://unpkg.com/lodash-es/lodash.js';

        console.log(_.isEqual({a: 1, b: 2, c: 3}, {c: 3, b: 2, a: 1}));
    </script>
</section>

<section class="code-wrap h250">
    <div class="css-live-wrap w40p">
        <div class="caption"><a href="https://www.lodashjs.com/docs/lodash.debounce"></a>debounce</div>
        <div class="centered debounce">
            <div class="demo-button">防抖</div>
        </div>
    </div>
    <script type="module" class="code w60p" contenteditable="true">
        import _ from 'https://unpkg.com/lodash-es/lodash.js';

        function bounce() {
            const search = _.debounce((query) => alert(`Searching for ${query}`), 500);
            // 模拟抖动导致连续触发三次方法
            search('apply');
            search('banana');
            search('car');
        }

        document.querySelector('.debounce .demo-button').onclick = bounce;
    </script>
</section>

<section class="code-wrap h300">
    <div class="css-live-wrap w40p">
        <div class="caption">
            <a href="https://www.lodashjs.com/docs/lodash#_value">-</a>: 隐式链，返回唯一值或返回原始值会自动解除链，否者需要调用 _#value 解除链
        </div>
        <div class="caption">
            <a href="https://www.lodashjs.com/docs/lodash.chain">chain</a>: 显式链，解除链必须使用 _#value
        </div>
        <div class="centered debounce">
            <div class="demo-text">数组中哪个元素出现最多次?</div>
        </div>
    </div>
    <script type="module" class="code w60p" contenteditable="true">
        import _ from 'https://unpkg.com/lodash-es/lodash.js';

        const array = [1, 'b', 'b', 3];

        // 隐式链，maxBy(_.last) 自动解除链
        console.log(_.head(_(array).countBy().entries().maxBy(_.last)));

        // 显式链，必须使用 _#value 解除链
        console.log(_.head(_.chain(array).countBy().entries().maxBy(_.last).value()));
    </script>
</section>
</body>
</html>
