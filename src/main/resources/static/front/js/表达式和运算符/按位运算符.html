<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <title>按位运算符</title>
    <link rel="icon" href="../../../static/img/ico/NoharaSinnosuke.ico">
    <link rel="stylesheet" href="../../../static/css/demo.css">
</head>

<body>
    <section class="code-wrap">
        <div class="css-live-wrap w100p">
            <div class="caption">按位运算符</div>
            <div class="centered">
                <table class="w1280">
                    <tbody>
                        <tr>
                            <th>运算符</th>
                            <th>用法</th>
                            <th>描述</th>
                            <th>0</th>
                            <th>-1</th>
                            <th>示例</th>
                        </tr>
                        <tr>
                            <td>按位与（AND）</td>
                            <td style="white-space: nowrap;">a &amp; b</td>
                            <td>对于每一个比特位，只有两个操作数相应的比特位都是1时，结果才为1，否则为0。</td>
                            <td>0</td>
                            <td>a</td>
                            <td>
                                <a href="javascript: alert(5 &amp; 0)">5 &amp; 0</a>
                                <br/>
                                <a href="javascript: alert(5 &amp; -1)">5 &amp; -1</a>
                            </td>
                        </tr>
                        <tr>
                            <td>按位或（OR）</td>
                            <td style="white-space: nowrap;">a | b</td>
                            <td>对于每一个比特位，当两个操作数相应的比特位至少有一个1时，结果为1，否则为0。</td>
                            <td>a</td>
                            <td>-1</td>
                            <td>
                                <a href="javascript: alert(5 | 0)">5 | 0</a>
                                <br/>
                                <a href="javascript: alert(5 | -1)">5 | -1</a>
                            </td>
                        </tr>
                        <tr>
                            <td>按位异或（XOR）</td>
                            <td style="white-space: nowrap;">a ^ b</td>
                            <td>对于每一个比特位，当两个操作数相应的比特位有且只有一个1时，结果为1，否则为0。</td>
                            <td>a</td>
                            <td>-(a+1)</td>
                            <td>
                                <a href="javascript: alert(5 ^ 0)">5 ^ 0</a>
                                <br/>
                                <a href="javascript: alert(5 ^ -1)">5 ^ -1</a>
                            </td>
                        </tr>
                        <tr>
                            <td>按位非（NOT）</td>
                            <td style="white-space: nowrap;">~ a</td>
                            <td>反转操作数的比特位，即0变成1，1变成0。</td>
                            <td colspan="2">-(a+1)</td>
                            <td>
                                <a href="javascript: alert(~5)">~5</a>
                            </td>
                        </tr>
                        <tr>
                            <td>左移（Left shift）</td>
                            <td style="white-space: nowrap;">a &lt;&lt; b</td>
                            <td>将 a 的二进制形式向左移 b (&lt; 32) 比特位，右边用0填充。</td>
                            <td colspan="2">a * 2^b</td>
                            <td>
                                <a href="javascript: alert(5 &lt;&lt; 2)">5 &lt;&lt; 2</a>
                            </td>
                        </tr>
                        <tr>
                            <td>有符号右移</td>
                            <td style="white-space: nowrap;">a &gt;&gt; b</td>
                            <td>将 a 的二进制表示向右移 b (&lt; 32) 位，丢弃被移出的位。</td>
                            <td colspan="2"></td>
                            <td>
                                <a href="javascript: alert(5 >> 2)">5 >> 2</a>
                            </td>
                        </tr>
                        <tr>
                            <td>无符号右移</td>
                            <td style="white-space: nowrap;">a &gt;&gt;&gt; b</td>
                            <td>将 a 的二进制表示向右移 b (&lt; 32) 位，丢弃被移出的位，并使用 0 在左侧填充。</td>
                            <td colspan="2"></td>
                            <td>
                                <a href="javascript: alert(5 >>> 2)">5 >>> 2</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="code-wrap">
        <div class="css-live-wrap w33p">
            <div class="caption">进制转换</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            // 10进制 => 2进制
            // 计算9.25的二进制
            9 / 2;      // 4...1
            4 / 2;      // 2...0
            2 / 2;      // 1...0
            1001

            0.25 * 2;   // 0.5 取整 0
            0.5 * 2;    // 1 取整 1
            0.01

            1001 + 0.01; 1001.01


            // 2进制 => 10进制
            // 计算1001.01的十进制

            //   1*2^3 + 0*2^2 + 0*2^1 + 1*2^0 + 0*2^-1 + 1*2^-2
            // = 8     + 0     + 0     + 1     + 0      + 0.25
            // = 9.25
        </script>
    </section>

    <section class="code-wrap h300">
        <div class="css-live-wrap w33p">
            <div class="caption">正码 补码 反码</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            // 314 原码
            00000000000000000000000100111010

            // ~314 反码
            11111111111111111111111011000101

            // -314 补码（反码+1）
            11111111111111111111111011000110

            // -2147483648（32位有符号数字所能表示的最小整数）
            10000000000000000000000000000000

            // 2147483647（32位有符号数字所能表示的最大整数）
            01111111111111111111111111111111
        </script>
    </section>

    <section class="code-wrap h150">
        <div class="css-live-wrap w33p">
            <div class="caption">摩根定律</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            var a = 1, b = 2;

            ~(a & b) === (~a | ~b); // true
            ~(a | b) === (~a & ~b); // true
        </script>
    </section>

    <section class="code-wrap h150">
        <div class="css-live-wrap w33p">
            <div class="caption">转换</div>
            <div class="caption">parseInt(string, radix) &amp; numObj.toString([radix])</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            // String (base 2) ==> number (base 10)
            var str = '1011';
            var num = parseInt(str, 2); // 11

            // number (base 10) ==> String (base 2);
            str = num.toString(2);      // "1011"
        </script>
    </section>

    <section class="code-wrap h450">
        <div class="css-live-wrap w33p">
            <div class="caption">标志位 & 掩码</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            // DCBA (Dog Cat Banana Apple)

            // 标志位
            var flags = 5; // 0101，表示没有 Dog，有 Cat，没有 Banana，有 Apple

            // 掩码
            var FLAG_A = 1; // 0001，Apple
            var FLAG_B = 2; // 0010，Banana
            var FLAG_C = 4; // 0100，Cat
            var FLAG_D = 8; // 1000，Dog

            // 获取新掩码
            var mask = FLAG_A | FLAG_B | FLAG_D;    // 0001 | 0010 | 1000 => 1011

            // 判断特定位置是否为被置位（是否为1）
            if (flags & FLAG_C) { }                 // 0101 & 0100 => 0100

            // 设置标志位
            mask = FLAG_C | FLAG_D;                 // 0100 | 1000 => 1100
            flags |= mask;                          // 0101 | 1100 => 1101

            // 清除标志位
            mask = ~(FLAG_A | FLAG_C);              // ~(0001 | 0101) => 1010
            flags &= mask;                          // 1101 & 1010 = 1000
        </script>
    </section>

    <section class="code-wrap h200">
        <div class="css-live-wrap w33p">
            <div class="caption">创建掩码</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function createMask() {
                var nMask = 0, nFlag = 0, nLen = arguments.length > 32 ? 32 : arguments.length;
                for (nFlag; nFlag < nLen; nMask |= arguments[nFlag] << nFlag++);
                return nMask;
            }

            var mask1 = createMask(1, 1, 0, 1);         // 11 (base 10), 1011 (base 2)
            var mask2 = createMask(false, false, true); // 4 (base 10), 0100 (base 2)
        </script>
    </section>

    <section class="code-wrap h250">
        <div class="css-live-wrap w33p">
            <div class="caption">逆算法 （掩码 => 数组）</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function arrayFromMask(nMask) {
                // nMask 必须介于 -2147483648 和 2147483647 之间
                if (nMask > 0x7fffffff || nMask < -0x80000000) {
                    throw new TypeError('arrayFromMask - out of range');
                }
                for (var nShifted = nMask, aFromMask = []; nShifted; aFromMask.push(Boolean(nShifted & 1)), nShifted >>>= 1);
                return aFromMask;
            }

            var mask1 = arrayFromMask(11);  // [true, true, false, true]
            var mask2 = arrayFromMask(4);   // [false, false, true]
        </script>
    </section>
</body>

</html>