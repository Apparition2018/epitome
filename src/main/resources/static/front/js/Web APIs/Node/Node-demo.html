<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <base target="_blank">
    <title>Node-demo</title>
    <link rel="icon" href="../../../../static/img/ico/NoharaSinnosuke.ico">
    <link rel="stylesheet" href="../../../../static/css/demo.css">
    <style>
        th {
            background-color: var(--gyb5);
            border: 1px solid var(--gyb5);
        }

        td {
            color: var(--gyb5);
            border: 1px solid var(--gyb5);
        }
    </style>
</head>

<body>
    <section class="code-wrap h650">
        <div class="css-live-wrap w100p">
            <div class="caption">属性</div>
            <div class="centered">
                <table class="w1280">
                    <tr>
                        <th>属性</th>
                        <th>概述</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td>Node.nodeName</td>
                        <td>返回节点的名称</td>
                        <td>
                            <a href="javascript: alert(document.body.nodeName)">document.body.nodeName</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.nodeType</td>
                        <td>返回节点节点的类型</td>
                        <td>
                            <a href="javascript: alert(document.body.nodeType)">document.body.nodeType</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.nodeValue</td>
                        <td>设置或返回节点值</td>
                        <td>
                            <a href="javascript: alert(document.body.nodeValue)">document.body.nodeValue</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.innerText</td>
                        <td>设置或返回节点及其后代的文本内容</td>
                        <td>
                            <a href="javascript: alert(document.body.innerText)">document.body.innerText</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.textContent</td>
                        <td>设置或返回节点及其后代的文本内容</td>
                        <td>
                            <a href="javascript: alert(document.body.textContent)">document.body.textContent</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.ownerDocument</td>
                        <td>返回节点的顶层的 document 对象</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Node.parentNode</td>
                        <td>返回节点的父节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Node.parentElement</td>
                        <td>返回节点的父元素节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Node.childNodes</td>
                        <td>返回节点子节点的 NodeList</td>
                        <td>
                            <a href="javascript: alert(document.body.childNodes[0])">document.body.childNodes[0]</a>
                        </td>
                    </tr>
                    <tr>
                        <td>ParentNode.children</td>
                        <td>返回节点子元素节点的 HTMLCollection</td>
                        <td>
                            <a href="javascript: alert(document.body.children[0])">document.body.children[0]</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.firstChild</td>
                        <td>返回节点的第一个子节点，或 null</td>
                        <td>
                            <a href="javascript: alert(document.body.firstChild)">document.body.firstChild</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Node.lastChild</td>
                        <td>返回节点的最后一个子节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>ParentNode.firstElementChild</td>
                        <td>返回节点的第一个子元素节点，或 null</td>
                        <td>
                            <a href="javascript: alert(document.body.firstElementChild)">document.body.firstElementChild</a>
                        </td>
                    </tr>
                    <tr>
                        <td>ParentNode.lastElementChild</td>
                        <td>返回节点的最后一个子元素节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Node.previousSibling</td>
                        <td>返回节点的前一个兄弟节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Node.nextSibling</td>
                        <td>返回父节点的 childNodes 列表中紧跟在其后面的节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>NonDocumentTypeChildNode.previousElementSibling</td>
                        <td>返回父节点的 children 集合中紧跟在其后面的元素节点，或 null</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>NonDocumentTypeChildNode.nextElementSibling</td>
                        <td>返回节点的前一个兄弟元素节点，或 null</td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </section>

    <section class="code-wrap h650">
        <div class="css-live-wrap w100p">
            <div class="caption">方法</div>
            <div class="centered">
                <table class="w1280">
                    <tr>
                        <th>方法</th>
                        <th>概述</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td>Node.appendChild()</td>
                        <td>在节点的最后一个子节点之后添加新的子节点</td>
                        <td>var child = parent.appendChild(child)</td>
                    </tr>
                    <tr>
                        <td>ParentNode.append()</td>
                        <td>在节点的最后一个子节点之后添加一组 Node 对象或 DOMString 对象</td>
                        <td>parent.append((Node or DOMString)... nodes)</td>
                    </tr>
                    <tr>
                        <td>ParentNode.prepend()</td>
                        <td>在节点的第一个子节点之前添加一组 Node 对象或 DOMString 对象</td>
                        <td>parent.prepend((Node or DOMString)... nodes)</td>
                    </tr>
                    <tr>
                        <td>Node.insertBefore()</td>
                        <td>在指定的子节点之前插入新节点</td>
                        <td>var new = parent.insertBefore(new, refer)</td>
                    </tr>
                    <tr>
                        <td>ChildNode.before()</td>
                        <td>在该节点之前插入一些 Node 或 DOMString 对象</td>
                        <td>node.before((Node or DOMString)... nodes)</td>
                    </tr>
                    <tr>
                        <td>ChildNode.after()</td>
                        <td>在该节点之后插入一些 Node 或 DOMString 对象</td>
                        <td>node.after((Node or DOMString)... nodes)</td>
                    </tr>
                    <tr>
                        <td>Node.removeChild()</td>
                        <td>从节点中移除子节点</td>
                        <td>var child = node.removeChild(child)</td>
                    </tr>
                    <tr>
                        <td>ChildNode.remove()</td>
                        <td>从它所属的DOM树中删除</td>
                        <td>node.remove()</td>
                    </tr>
                    <tr>
                        <td>Node.replaceChild()</td>
                        <td>替换子节点</td>
                        <td>old = parent.replaceChild(new, old)</td>
                    </tr>
                    <tr>
                        <td>ChildNode.replaceWith()</td>
                        <td>替换节点</td>
                        <td>node.replaceWith((Node or DOMStr)... nodes)</td>
                    </tr>
                    <tr>
                        <td>Node.cloneNode()</td>
                        <td>克隆节点</td>
                        <td>var dupNode = node.cloneNode(deep)</td>
                    </tr>
                    <tr>
                        <td>Node.compareDocumentPosition()</td>
                        <td>比较两个节点的文档位置</td>
                        <td>node.compareDocumentPosition(otherNode)</td>
                    </tr>
                    <tr>
                        <td>Node.contains()</td>
                        <td>如果传入的节点是该节点的后代节点，则返回 true，否则返回 false</td>
                        <td>node.contains(otherNode) </td>
                    </tr>
                    <tr>
                        <td>Node.hasChildNodes()</td>
                        <td>如果节点拥有子节点，则返回 true，否则 false</td>
                        <td>element.hasChildNodes()</td>
                    </tr>
                    <tr>
                        <td>Node.isEqualNode()</td>
                        <td>如果两个节点"相等"，则返回 true，否则 false</td>
                        <td>node.isEqualNode(otherNode)</td>
                    </tr>
                    <tr>
                        <td>Node.normalize()</td>
                        <td>合并节点中相邻的文本节点，并移除空的文本节点</td>
                        <td>element.normalize()</td>
                    </tr>
                    <tr>
                        <td>ParentNode.querySelector()</td>
                        <td>返回以当前元素为根元素，匹配给定选择器的第一个元素 Element</td>
                        <td>element = document.querySelector(selectors)</td>
                    </tr>
                    <tr>
                        <td>ParentNode.querySelectorAll()</td>
                        <td>返回以当前元素为根元素，匹配给定选择器的一个 NodeList</td>
                        <td>elementList = document.querySelectorAll(selectors)</td>
                    </tr>
                </table>
            </div>
        </div>
    </section>

    <section class="code-wrap h550">
        <div class="css-live-wrap w100p">
            <div class="caption">nodeName &amp; nodeValue</div>
            <div class="name centered">
                <table class="w1024">
                    <tr>
                        <th></th>
                        <th style="width: 20%">nodeName</th>
                        <th style="width: 20%">nodeValue</th>
                        <th style="width: 20%">textContent</th>
                    </tr>
                    <tr>
                        <td>Attr</td>
                        <td>Attr.name</td>
                        <td colspan="2">属性值</td>
                    </tr>
                    <tr>
                        <td>CDATASection</td>
                        <td>"#cdata-section"</td>
                        <td colspan="2">文本内容</td>
                    </tr>
                    <tr>
                        <td>Comment（注释）</td>
                        <td>"#comment"</td>
                        <td colspan="2">文本内容</td>
                    </tr>
                    <tr>
                        <td>ProcessingInstruction（处理指令）</td>
                        <td>ProcessingInstruction.target</td>
                        <td colspan="2">文本内容</td>
                    </tr>
                    <tr>
                        <td>Text</td>
                        <td>"#text"</td>
                        <td colspan="2">文本内容</td>
                    </tr>
                    <tr>
                        <td>Document</td>
                        <td>"#document"</td>
                        <td colspan="2">null</td>
                    </tr>
                    <tr>
                        <td>DocumentType</td>
                        <td>DocumentType.name</td>
                        <td colspan="2">null</td>
                    </tr>
                    <tr>
                        <td>Notation</td>
                        <td>Notation名称</td>
                        <td colspan="2">null</td>
                    </tr>
                    <tr>
                        <td>DocumentFragment</td>
                        <td>"#document-fragment"</td>
                        <td>null</td>
                        <td rowspan="4">将所有子节点的 textContent 合并后返回</td>
                    </tr>
                    <tr>
                        <td>Element</td>
                        <td>"Element.tagName"</td>
                        <td>null</td>
                    </tr>
                    <tr>
                        <td>NamedNodeMap（属性节点Attr对象的集合）</td>
                        <td>/</td>
                        <td>null</td>
                    </tr>
                    <tr>
                        <td>EntityReference</td>
                        <td>实体引用名称</td>
                        <td>null</td>
                    </tr>
                    <tr>
                        <td>Entity</td>
                        <td>实体</td>
                        <td>?</td>
                        <td>?</td>
                    </tr>
                </table>
            </div>
        </div>
    </section>

    <section class="code-wrap h350">
        <div class="css-live-wrap w100p">
            <div class="caption">nodeType</div>
            <div class="nodeType centered">
                <table class="w1024">
                    <tr>
                        <th>常量</th>
                        <th>值</th>
                        <th>概述</th>
                    </tr>
                    <tr>
                        <td>Node.ELEMENT_NODE</td>
                        <td>1</td>
                        <td>一个元素节点，例如&lt;p&gt;&lt;div&gt;</td>
                    </tr>
                    <tr>
                        <td>Node.TEXT_NODE</td>
                        <td>3</td>
                        <td>Element 或者 Attr 中实际的文字</td>
                    </tr>
                    <tr>
                        <td>Node.PROCESSING_INSTRUCTION_NODE</td>
                        <td>7</td>
                        <td>一个用于 XML 文档的 ProcessingInstruction，例如 &lt;?xml-stylesheet ... ?&gt; 声明。</td>
                    </tr>
                    <tr>
                        <td>Node.COMMENT_NODE</td>
                        <td>8</td>
                        <td>一个 Comment 节点</td>
                    </tr>
                    <tr>
                        <td>Node.DOCUMENT_NODE</td>
                        <td>9</td>
                        <td>一个 Document 节点</td>
                    </tr>
                    <tr>
                        <td>Node.DOCUMENT_TYPE_NODE</td>
                        <td>10</td>
                        <td>描述文档类型的 DocumentType 节点。例如 &lt;!DOCTYPE html&gt; 就是用于 HTML5 的</td>
                    </tr>
                    <tr>
                        <td>Node.DOCUMENT_FRAGMENT_NODE</td>
                        <td>11</td>
                        <td>一个 DocumentFragment 节点</td>
                    </tr>
                </table>
            </div>
        </div>
    </section>

    <section class="code-wrap h350">
        <div class="css-live-wrap w100p">
            <div class="caption">
                <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent">textContent</a>
                
            </div>
            <div class="caption">
                <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/innerText">innerText</a>
            </div>
            <div class="text centered">
                <table class="w1024">
                    <tr>
                        <th>innerText</th>
                        <th style="width: 50%">textContent</th>
                    </tr>
                    <tr>
                        <td>不会</td>
                        <td>textContent 会获取所有元素的内容，包括 &lt;script&gt; 和 &lt;style&gt; 元素</td>
                    </tr>
                    <tr>
                        <td>innerText 受 CSS 样式的影响，会触发 reflow</td>
                        <td>不会</td>
                    </tr>
                    <tr>
                        <td>innerText 受 CSS 样式的影响，不会返回隐藏元素的文本</td>
                        <td>会</td>
                    </tr>
                    <tr>
                        <td>在小于等于 IE11 中对 innerText 进行修改， 不仅会移除当前元素的子节点，而且还会永久性地破坏所有后代文本节点（所以不可能再次将节点再次插入到任何其他元素或同一元素中）???</td>
                        <td>在节点上设置 textContent 属性的话，会删除它的所有子节点，并替换为一个具有给定值的文本节点</td>
                    </tr>
                    <tr>
                        <td>IE4</td>
                        <td>IE9</td>
                    </tr>
                </table>
            </div>
        </div>
    </section>

    <section class="code-wrap h550" id="create">
        <div class="css-live-wrap w40p">
            <div class="caption">insertBefore()</div>
            <div class="caption">利用 insertBefore &amp; nextSibling 模拟 insertAfter</div>
            <div class="insert centered">
                <ul class="heroes">
                    <li>關羽</li>
                    <li>張飛</li>
                    <li class="active">趙雲</li>
                    <li>馬超</li>
                    <li>黃忠</li>
                </ul>
                <div class="btn">
                    <div onclick="insertChange(event)">insertBefore 刘备</div>
                    <div onclick="insertChange(event)">模拟 insertAfter 刘备</div>
                </div>
            </div>
        </div>
        <style>
            .insert {
                color: var(--gyb5);
                text-align: center;
            }

            .insert ul {
                font-size: 0;
                white-space: nowrap;
            }

            .insert li {
                display: inline-block;
                padding: 5px 8px;
                font-size: 16px;
                border: 1px solid var(--gyb5);
                box-shadow: 1px 1px 2px var(--gyb5);
            }

            .insert li:not(:first-child) {
                margin-left: -1px;
            }


            .insert .active {
                color: #fff;
                background: var(--gyb5);
            }

            .insert .btn {
                width: 250px;
                margin: 40px auto 0;
                color: var(--gyb5);
            }

            .insert .btn>div {
                padding: 10px;
                border: 1px solid var(--gyb5);
                box-shadow: 1px 0 2px var(--gyb5);
                user-select: none;
                cursor: pointer;
            }

            .insert .btn>div:hover {
                color: #fff;
                background: var(--gyb5);
            }

            .insert .btn>div:first-child {
                border-radius: 3px 3px 0 0;
            }

            .insert .btn>div:last-child {
                margin-top: -1px;
                border-radius: 0 0 3px 3px;
                box-shadow: 1px 1px 2px var(--gyb5);
            }
        </style>
        <script class="code w60p" contenteditable="true">
            const current2 = document.querySelector('.insert ul').children[2];

            function insertChange(e) {
                e = e.target;

                const heroes = document.querySelector('.insert ul').children;

                for (let i = 0; i < heroes.length; i++) {
                    heroes[i].className = '';
                }

                const ul = document.querySelector('.insert ul');

                /* 创建元素节点 */
                const liubei = document.createElement('li');
                /* 创建文本节点 */
                const newContent = document.createTextNode('刘备');
                liubei.appendChild(newContent);
                /* 创建 Attr 节点 */
                const att = document.createAttribute('class');
                att.nodeValue = 'active';
                /* 向元素中添加指定的属性节点 */
                liubei.setAttributeNode(att);

                if (e.textContent === 'insertBefore 刘备') {
                    ul.insertBefore(liubei, current2);
                } else {
                    ul.insertBefore(liubei, current2.nextElementSibling);
                }
            }
        </script>
    </section>

    <!--前端性能优化指南：https://cnodejs.org/topic/55e31bd6898f6bdc7e5551ac
        https://developer.mozilla.org/zh-CN/docs/Web/API/Node/cloneNode -->
    <section class="code-wrap h500">
        <div class="css-live-wrap w40p">
            <div class="caption">cloneNode() &amp; replaceChild() &amp; appendChild() &amp; removeChild()</div>
            <div class="caption">优化节点修改，使用 cloneNode 在外部更新节点然后再通过 replaceChild 与原始节点互换</div>
            <div class="clone-node centered">
                <div>
                    <ul class="origin"></ul>
                </div>
                <div class="btn">
                    <div onclick="replace()">replace</div>
                    <div onclick="remove()">remove</div>
                </div>
            </div>
        </div>
        <style>
            .clone-node {
                height: 285px;
                padding: 10px;
                margin-top: 35px;
                font-size: 14px;
                text-align: center;
                border: 1px solid var(--gyb5);
                border-radius: 2px;
                box-shadow: 1px 1px 2px var(--gyb5);
            }

            .clone-node>div:nth-child(1) {
                height: 233px;
                border-radius: 2px;
                overflow: hidden;
            }

            .clone-node ul {
                width: 242px;
                padding: 0;
                margin: 0;
                background: var(--gyb5);
                border: 1px solid var(--gyb5);
                box-shadow: 1px 1px 2px var(--gyb5);
            }

            .clone-node li {
                display: inline-block;
                margin: 8px;
                color: #fff;
            }

            .clone-node .btn {
                position: absolute;
                left: 0;
                right: 0;
                bottom: 10px;
                margin-top: 20px;
                color: var(--gyb5);
                font-size: 0;
                user-select: none;
                cursor: pointer;
            }

            .clone-node .btn>div {
                display: inline-block;
                font-size: 14px;
            }

            .clone-node .btn>div {
                padding: 5px 0;
                width: 75px;
                cursor: pointer;
            }

            .clone-node .btn>div:hover {
                color: #fff;
                background: var(--gyb5);
            }

            .clone-node .btn>div:nth-child(1) {
                border: 1px solid var(--gyb5);
                box-shadow: 0 1px 2px var(--gyb5);
                border-radius: 3px 0 0 3px;
            }

            .clone-node .btn>div:nth-child(2) {
                margin-left: -1px;
                border: 1px solid var(--gyb5);
                box-shadow: 1px 1px 2px var(--gyb5);
                border-radius: 0 3px 3px 0;
            }
        </style>
        <script class="code w60p" contenteditable="true">
            function replace() {
                const origin = document.getElementsByClassName('origin')[0];
                // 如果为true，深度克隆，则该节点的所有后代节点也都会被克隆
                const clone = origin.cloneNode(true);
                const list = ['關羽', '張飛', '趙雲', '馬超', '趙雲'];
                let li;
                for (let i = 0, len = list.length; i < len; i++) {
                    li = document.createElement('li');
                    li.textContent = list[i];
                    clone.appendChild(li);
                }
                origin.parentNode.replaceChild(clone, origin);
            }

            function remove() {
                const origin = document.getElementsByClassName('origin')[0];
                /* 返回包含指定节点的子节点的集合，该集合为即时更新的集合 */
                const children = origin.childNodes;
                for (let i = children.length - 1; i >= 0; i--) {
                    origin.removeChild(children[i]);
                }
            }
        </script>
    </section>

    <section class="code-wrap h500">
        <div class="css-live-wrap w40p">
            <div class="caption">
                <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelectorAll">querySelectorAll</a>
                <a href="https://www.zhangxinxu.com/wordpress/2015/11/know-dom-queryselectorall/">querySelectorAll</a>
            </div>
            <div class="eg1 centered">
                <label class="label">
                    <input class="radio" type="radio" name="radio" value="">
                    <span class="radioInput"></span>
                    <span class="text">document.querySelector(".eg1").querySelectorAll("span span")</span>
                </label>
                <label class="label">
                    <input class="radio" type="radio" name="radio" value="">
                    <span class="radioInput"></span>
                    <span class="text">document.querySelector(".eg1 span span")</span>
                </label>
                <span class="querySelectorAll">
                    <span></span>
                    <span>
                        <span></span>
                    </span>
                </span>
            </div>
        </div>
        <style>
            .eg1 {
                white-space: nowrap;
            }

            .label {
                display: block;
                margin: 20px 0;
                font-size: 14px;
            }

            .radio {
                display: none
            }

            .radioInput {
                display: inline-block;
                vertical-align: middle;
                background-color: #fff;
                width: 14px;
                height: 14px;
                line-height: 1;
                margin: -1px 10px 0 0;
                border: 1px solid rgba(0, 0, 0, 0.15);
                border-radius: 50%;
            }

            .radio:checked+.radioInput:after {
                content: "";
                display: inline-block;
                width: 10px;
                height: 10px;
                margin: 2px;
                background-color: #57ad68;
                border-radius: 50%;
            }

            .querySelectorAll {
                display: flex;
                justify-content: center;
                align-items: center;
                width: 375px;
                height: 200px;
                margin: 0 auto;
                border: 1px solid #000;
            }

            .querySelectorAll>span {
                display: flex;
                justify-content: center;
                align-items: center;
                width: 150px;
                height: 150px;
                margin: 25px;
                border: 1px solid #000;
            }

            .querySelectorAll>span>span {
                width: 100px;
                height: 100px;
                border: 1px solid #000;
            }
        </style>
        <script class="code w60p" contenteditable="true">
            const selects = document.querySelectorAll(".label");
            selects.forEach(function (value, index, array) {
                value.onclick = function (e) {
                    if (e.target.name === 'radio') {
                        const text = document.querySelector(".radio:checked").parentNode.querySelector(".text").textContent;
                        let selects = document.querySelectorAll(".querySelectorAll span");
                        if (text.indexOf(".eg1 span span") !== -1) {
                            selects.forEach(function (value, index, array) {
                                value.style.background = "#fff";
                            });
                            document.querySelector(".eg1 span span").style.background = "#57ad68";
                        } else {
                            selects.forEach(function (value, index, array) {
                                value.style.background = "#fff";
                            });
                            selects = document.querySelector(".eg1").querySelectorAll("span span");
                            selects.forEach(function (value, index, array) {
                                value.style.background = "#57ad68";
                            })
                        }
                    }
                }
            });
        </script>
    </section>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../../../static/js/demo.js"></script>
</body>

</html>