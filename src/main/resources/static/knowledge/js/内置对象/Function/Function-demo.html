<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <title>Function-demo</title>
    <link rel="icon" href="../../../../img/Nohara Sinnosuke.png">
    <link rel="stylesheet" href="../../../../css/demo.css">
</head>

<body>
    <section class="code-wrap h100">
        <div class="css-live-wrap w33p">
            <div class="caption">new Function ([arg1[, arg2[, ...argN]],] functionBody)</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            var f = new Function('a', 'b', 'return a + b');
            f(2, 3); // 5
        </script>
    </section>

    <section class="code-wrap h100">
        <div class="css-live-wrap w33p">
            <div class="caption">Function.caller</div>
            <div class="caption">返回调用指定函数的函数</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function x() { return x.caller };
            function y() { return x() === y };
            y(); // true
        </script>
    </section>

    <section class="code-wrap h100">
        <div class="css-live-wrap w33p">
            <div class="caption">Function.length</div>
            <div class="caption">返回函数的形参个数</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function z(a, b, c) { };
            z.length; // 3
        </script>
    </section>

    <section class="code-wrap h350">
        <div class="css-live-wrap w33p">
            <div class="caption">apply(), call(), bind() 区别</div>
            <div class="caption"></div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            var m = { 'x': 1 };

            function foo(y) {
                return this.x + y;
            }

            // apply(thisArg, [argsArray])
            // 接受参数数组
            foo.apply(m, [2]);

            // call(thisArg, arg1, arg2, ...)
            // 接受参数列表
            foo.call(m, 2);

            // bind(thisArg[, arg1[, arg2[, ...]]])
            // 接受参数列表，返回一个新函数
            foo.bind(m, 2)();
        </script>
    </section>

    <section class="code-wrap h200">
        <div class="css-live-wrap w33p">
            <div class="caption">apply(), call(), bind()</div>
            <div class="caption">如第一个参数不是对象，js 会尝试将其转换为对象</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function bar() {
                return this;
            }

            var a = bar.call(7);

            typeof a; // 'object', new number(7)
        </script>
    </section>

    <section class="code-wrap h200">
        <div class="css-live-wrap w33p">
            <div class="caption">apply(), call(), bind()</div>
            <div class="caption">如第一个参数不是对象，js 会尝试将其转换为对象</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function bar() {
                return this;
            }

            var a = bar.call(7);

            typeof a; // 'object', new number(7)
        </script>
    </section>

    <section class="code-wrap h300" id="bind">
        <div class="css-live-wrap w33p">
            <div class="caption">在 bind() 创建的新函数中，this 将永久地被绑定到了 bind 的第一个参数</div>
            <div class="caption">无论这个函数是如何被调用的</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            function l() {
                return this.age;
            }

            var m = l.bind({ age: 17 });
            m();    // 17

            var n = m.bind({ age: 18 });
            n();    // 17

            var o = { age: 37, l: l, m: m, n: n };
            o.l();  // 37
            o.m();  // 17
            o.n();  // 17
        </script>
    </section>
</body>

</html>