<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <title>replace()-demo</title>
    <link rel="icon" href="../../../../img/Nohara Sinnosuke.png">
    <link rel="stylesheet" href="../../../../css/demo.css">
</head>

<body>
    <!--https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace
        
        str.replace(regexp|substr, newSubStr|function)

        replace():  返回一个由替换值替换一些或所有匹配的模式后的新字符串。
                    模式可以是一个字符串或者一个正则表达式, 
                    替换值可以是一个字符串或者一个每次匹配都要调用的函数。

        注意：原字符串不会改变 -->

    <section class="code-wrap h350">
        <div class="css-live-wrap w33p">
            <div class="caption">textarea 替换空格和换行符，保存到数据库</div>
            <div class="caption">利用 replace()中的 global 选项 实现</div>
            <div class="centered" id="eg1">
                <textarea name="textarea" cols="36" rows="8" placeholder="输入空格和换行，看看效果..." onkeyup="eg1()"></textarea>
                <p class="text"></p>
            </div>
        </div>
        <style>
            #eg1 textarea {
                padding: 8px;
                margin-top: 30px;
                color: #333;
                border-radius: 1px;
            }

            #eg1 p {
                min-height: 19px;
                margin-top: 15px;
                margin-bottom: 0;
                padding-bottom: 3px;
                color: #333;
                border-bottom: 1px solid #666;
            }
        </style>
        <script class="code w67p" contenteditable="true">
            function eg1() {
                var text = document.querySelector("#eg1 .text");
                var textarea = document.querySelector("#eg1 textarea");
                text.textContent = textarea.value.replace(/\r\n/g, '<br/>').replace(/\n/g, '<br/>').replace(/\s/g, '&nbsp;');
            }
        </script>
    </section>

    <section class="code-wrap h350">
        <div class="css-live-wrap w33p">
            <div class="caption">特殊变量</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            var str = '1a2b3';

            // $$: 插入一个 "$"
            var newStr = str.replace(/[a-z]/g, '$$'); // "1$2$3"

            // $&: 插入匹配的子串
            var newStr = str.replace(/[a-z]/g, '$&'); // "1a2b3"

            // $`: 插入当前匹配的子串左边的内容
            var newStr = str.replace(/[a-z]/g, '$`'); // "1121a23"

            // $': 插入当前匹配的子串右边的内容
            var newStr = str.replace(/[a-z]/g, "$'"); // "12b3233"

            // $$: 假如第一个参数是 RegExp对象，并且 n 是个小于100的非负整数，那么插入第 n 个括号匹配的字符串
            var newStr = str.replace(/([a-z])\d([a-z])/g, '$2'); // "1b3"
        </script>
    </section>

    <section class="code-wrap h150">
        <div class="css-live-wrap w33p">
            <div class="caption">交换字符串中的两个单词</div>
            <div class="caption">使用$1 和 $2 代替替换文本</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">
            var re = /(\w+)\s(\w+)/;
            var str = "Henry Reyes";
            var newStr = str.replace(re, "$2 $1"); // "Reyes Henry"
        </script>
    </section>

    <section class="code-wrap h200">
        <div class="css-live-wrap w33p">
            <div class="caption">将驼峰命名转换成-命名</div>
            <div class="caption">利用 match 实现</div>
            <div class="centered">
            </div>
        </div>
        <style>
        </style>
        <script class="code w67p" contenteditable="true">            
            function styleHyphenFormat(propertyName) {
                function upperToHyphenLower(match) {
                    return '-' + match.toLowerCase();
                }
                return propertyName.replace(/[A-Z]/g, upperToHyphenLower);
            }

            styleHyphenFormat('backgroundColor');
        </script>
    </section>
</body>

</html>